
### 常见危险函数

1. eval ()

   ``mixed eval ( string $code )``

   函数 eval() 语言结构是非常危险的， 因为它允许执行任意 PHP 代码。``<?php @eval($_POST['v']);?>``—— 常见的一句话木马。

2. assert()

   ``bool assert ( mixed $assertion [, string $description ] )``

   php语言危险函数

3. call_user_func()
   php函数把第一参数作为回调函数
4. array_map()
   php函数为数组的每个元素应用回调函数
5. \`\`反引号
   ```<?php echo `whoami`;?>```
6. exec
   python语言危险函数
7. 
   java中没有类似php中的eval函数，但是有反射机制，并有各种基于反射机制的表达式引擎，如：OGNL、SpEL等

### GETSHELL到UDF提权

#### 信息收集

打点技术 端口 ip 域名 邮箱 手机

端口扫描：

namp：nmap -sS -Pn -v -a

|      |                                                              |
| ---- | ------------------------------------------------------------ |
| -sS  | 隐蔽扫描                                                     |
| -Pn  | 服务器禁止ping命令，跳过主机发现的过程进行端口扫描，-p0也要类似的效果 |
| -P0  | 免Ping 扫描，穿透防火墙，避免被防火墙发现                    |
| -v   | 显示扫描过程                                                 |
| -A   | 全面的系统扫描:包括打开操作系统探测、版本探测、脚本扫描、路径跟踪 |
| -sP  | ping扫描                                                     |
| -p   | 指定端口范围（-p 1-65535）                                   |

#### getshell

利用3306端口，获取mysql用户名 密码

利用mysql-udf提权
### tools

**NMAP** 

[Nmap使用技巧总结](D://MyComputer/Documents/渗透测试/Nmap使用技巧总结.pdf)

|      |                                                              |
| ---- | ------------------------------------------------------------ |
| -sS  | 隐蔽扫描                                                     |
| -Pn  | 服务器禁止ping命令，跳过主机发现的过程进行端口扫描，-p0也要类似的效果 |
| -P0  | 免Ping 扫描，穿透防火墙，避免被防火墙发现                    |
| -v   | 显示扫描过程                                                 |
| -A   | 全面的系统扫描:包括打开操作系统探测、版本探测、脚本扫描、路径跟踪 |
| -sP  | ping扫描                                                     |
| -p   | 指定端口范围（-p 1-65535）                                   |

#### dirb使用

dirb是一个基于字典的目录扫描工具，会采用递归的方式去获取更多的目录，支持代理，延迟访问和添加请求头。此工具在kali中自带。

dirb是一个目录扫描工具，类似于御剑一样，所以对于大多数情况而言，如果对一个网站的语言不是很清楚，可以直接使用语句
`dirb http://114.67.175.224:17896`
进行扫描即可。

但这种方法可能会浪费时间，也可能访问过多被**封IP**，所以最好使用dirb扫描的时候设置一下参数。

| 参数 | 作用                                                       |
| ---- | ---------------------------------------------------------- |
| -a   | 设置User-Agent                                             |
| -p   | proxy，设置代理                                            |
| -c   | cookie，设置cookie                                         |
| -z   | 设置访问间的延迟，单位毫秒                                 |
| -o   | oupput，可以控制输出结果到指定的路径文件中                 |
| -i   | 不区分大小写                                               |
| -X   | 如果已经确定要扫描的文件后缀，可以使用此参数，直接加上后缀 |

==-z可以设置一下，避免ip被封，-X（大写）也可以设置，某种程度上也可以加速扫描==

**FUZZ**

kali自带wfuzz

```
wfuzz -w <字典文件> http://192.168.30.134/index.php?FUZZ
```

**CMSEEK**

cms指纹识别

```
cmseek -u <url>
```

**WPSCAN**

kali自带

扫描wordpress专用工具

```
wpscan --url <url> --enumerate u #u 获取用户名
```

**AWVS**

Acunetix Web Vulnerability Scanner（简称AWVS）是一款知名的网络漏洞扫描工具，它通过网络爬虫测试你的网站安全，检测流行安全漏洞。在漏洞扫描实战过程中，一般会首选AWVS，因为这个能扫描出来的漏洞很多，而且使用比较简单。

**APPScan**

IBM AppScan是一款非常好用且功能强大的Web 应用安全测试工具，曾以 Watchfire AppScan 的名称享誉业界，Rational AppScan 可自动化 Web 应用的安全漏洞评估工作，能扫描和检测所有常见的 Web 应用安全漏洞，例如 SQL 注入（SQL-injection）、跨站点脚本攻击（cross-site scripting）、缓冲区溢出（buffer overflow）及最新的 Flash/Flex 应用及 Web 2.0 应用曝露等方面安全漏洞的扫描。

AppScan 好处在于误报是最少的，相比WVS扫描更慢。

### IP分类

**A类地址：** 1.0.0.0-126.255.255.255。0+7位网络号+24位主机号。用于最大型网络。10.0.0.0-10.255.255.255是私有地址。

**B类地址：** 128.0.0.0-191.255.255.255。10+14位网络号+16位主机号。用于中型网络。172.16.0.0-172.31.255.255是私有地址。169.254.0.0-169.254.255.255是保留地址。如果设备的IP地址设置为自动获取，而在网络上又没有找到可用的DHCP服务器，将从保留地址中获取一个IP地址。

**C类地址：** 192.0.0.0-223.255.255.255。110+21位网络号+8位主机号。用于小型网络的单点网络通信。192.168.0.0-192.168.255.255是私有地址。

**D类地址：** 224.0.0.0-239.225.225.225。1110+28位多播组号。只用于组播。

**E类地址：** 240.0.0.0-255.255.255.254。11110+27位留用。用于试验。
#### localhost和127.0.0.1区别

localhost是不经网卡传输！它不受网络防火墙和网卡相关的的限制。

127.0.0.1是通过网卡传输，依赖网卡，并受到网络防火墙和网卡相关的限制。